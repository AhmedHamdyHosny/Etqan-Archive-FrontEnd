<div class="container">
  <form (ngSubmit)="onSubmit(form)" #form="ngForm">
    <div class="d-flex flex-column flex-md-row mb-4">
      <app-input
        class=""
        [form]="form"
        inputType="text"
        name="search"
        [(ngModel)]="filterModel!.search"
      >
      </app-input>
      <div class="mx-2"></div>
      <div class="d-flex mt-3 mt-md-0">
        <button type="submit" class="btn btn-primary px-4">بحث</button>
        <div class="mx-2"></div>
        <button
          type="button"
          class="btn btn-outline-primary"
          (click)="collapse.toggle()"
          [attr.aria-expanded]="!advancedSearchModeOff"
          aria-controls="collapseExample"
        >
          بحث متقدم
        </button>
      </div>
    </div>

    <div
      class="advancedSearch collapse"
      #collapse="ngbCollapse"
      [(ngbCollapse)]="advancedSearchModeOff"
      id="collapseExample"
    >
      <div class="row flex-column flex-md-row">
        <div class="col">
          <app-select
            label="المشروع"
            [menuItems]="filterData.projects"
            [form]="form"
            name="projectId"
            [(ngModel)]="filterModel!.projectId"
          >
          </app-select>
        </div>
        <div class="col">
          <app-select
            label="نوع المحتوى"
            [menuItems]="filterData.contentTypes"
            [form]="form"
            name="contentTypeId"
            [(ngModel)]="filterModel!.contentTypeId"
          >
          </app-select>
        </div>
        <div class="col">
          <app-select
            label="فئة المحتوى"
            [menuItems]="filterData.categories"
            [form]="form"
            name="categoryId"
            [(ngModel)]="filterModel!.categoryId"
          >
          </app-select>
        </div>
      </div>
      <div class="row my-2">
        <div class="col col-md-8">
          <label for="fileExtensionIds">صيغة الملف</label>
          <ng-select
            [items]="filterData.fileExtensions"
            bindLabel="text"
            bindValue="value"
            name="fileExtensionIds"
            [multiple]="true"
            [(ngModel)]="filterModel!.fileExtensionIds"
          >
          </ng-select>
        </div>
      </div>
      <div class="mt-4 d-flex flex-column flex-md-row">
        <div class="col">
          <label for="keyWords">الكلمات الدالة</label>
          <ng-select
            [addTag]="true"
            name="keyWords"
            [hideSelected]="true"
            [multiple]="true"
            bindLabel="name"
            [isOpen]="false"
            [selectOnTab]="true"
            [(ngModel)]="filterModel.keyWordsList"
          >
          </ng-select>
        </div>
        <div class="mx-2"></div>

        <div class="align-self-end mt-3 mt-md-0">
          <button
            (click)="resetFilters()"
            type="button"
            class="btn btn-danger px-4"
          >
            إعادة ضبط
          </button>
        </div>
      </div>
    </div>
  </form>

  <div class="row d-flex mt-5">
    <div *ngIf="projectFileViews.length == 0" class="no-result">
      لا توجد نتيجه للبحث
    </div>
    <div *ngFor="let item of projectFileViews" class="card project-item">
      <div class="card-body">
        <h5 class="card-title fw-bold fs-5">{{ item.projectName ?? "" }}</h5>
        <h4 class="card-title fw-bold fs-6">{{ item.contentTitle ?? "" }}</h4>
        <!-- <h6 class="card-subtitle mb-2 fw-bold fs-6 text-muted">{{ item.contentTypeName }}</h6> -->
        <!-- <p class="card-text">
         {{ item.contentDescription }}
        </p> -->
        <div class="d-flex justify-content-between mb-2">
          <p>{{ item.contentDescription }}</p>
          <div>
            <p>{{ item.contentTypeName }}</p>
            <p>{{ item.fileExtensionName }}</p>
          </div>
        </div>

        <div class="d-flex justify-content-between">
          <a
            (click)="routeToFileDetail(item)"
            class="btn btn-secondary card-link"
            >تفاصيل</a
          >
          <a class="btn btn-info card-link" (click)="copyToClipboard(item)"
            ><i class="fas fa-link"></i
          ></a>
        </div>
      </div>
    </div>
  </div>

  <!-- <div class="row">
    <ngb-pagination
    *ngIf="paging.totalItemsCount > 0"
    class="d-flex justify-content-center mt-5 text-black-50"
    [collectionSize]="paging.totalItemsCount"
    [(page)]="paging.page"
    [maxSize]="4"
    [pageSize]="filterModel.pageSize"
    (pageChange)="onPageChanged($event)"
  ></ngb-pagination>
  </div> -->
  
<div class="d-flex justify-content-between py-5">
  <div>
    <div class="total-items-count">النتيجة الكلية: {{paging.totalItemsCount}}</div>
  </div>
  <button *ngIf="showMoreBtn" (click)="showMore()" class="btn btn-primary">
    المزيد
  </button>
</div>
</div>

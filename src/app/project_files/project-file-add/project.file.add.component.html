<div class="container py-4">
  <form (ngSubmit)="onSubmit(form)" #form="ngForm">
    <div class="row">
      <div class="col-xs-12 col-sm-10 col-md col-lg">
        <h4>{{ "إضافة ملف مشروع" | translate }}</h4>
        <hr />
        <br />
      </div>
    </div>

    <div class="row flex-column flex-md-row">
      <div class="col form-group">
        <div>
          <app-select
            label="المشروع"
            [menuItems]="references.projects"
            [form]="form"
            name="projectId"
            [required]="true"
            [(ngModel)]="projectFile!.projectId"
          >
          </app-select>
        </div>

        <div>
          <app-select
            label="نوع المحتوى"
            [menuItems]="references.contentTypes"
            [form]="form"
            name="contentTypeId"
            [required]="true"
            [(ngModel)]="projectFile!.contentTypeId"
          >
          </app-select>
        </div>

        <div>
          <app-select
            label="فئة المحتوى"
            [menuItems]="references.categories"
            [form]="form"
            name="categoryId"
            [(ngModel)]="projectFile!.categoryId"
          >
          </app-select>
        </div>

        <div>
          <app-input
            label="مسار الملف"
            [form]="form"
            inputType="text"
            [required]="true"
            name="filePath"
            [fileExtension]="true"
            [(ngModel)]="projectFile!.filePath"
          >
          </app-input>
        </div>

        <div>
          <app-input
            label="ملاحظات"
            [form]="form"
            inputType="text"
            name="notes"
            [(ngModel)]="projectFile!.note"
          >
          </app-input>
        </div>
      </div>
      <div class="col form-group">
        <div>
          <app-datePicker
            label="تاريخ الإنتاج"
            [form]="form"
            [(ngModel)]="projectFile!.productionDate"
            name="eventDate"
            [required]="true"
          ></app-datePicker>
        </div>
        <div>
          <app-input
            label="عنوان للمحتوى"
            [form]="form"
            inputType="text"
            name="contentTitle"
            [(ngModel)]="projectFile!.contentTitle"
          >
          </app-input>
        </div>
        <div>
          <app-textarea
            label="وصف المحتوى"
            [form]="form"
            name="contentDescription"
            [(ngModel)]="projectFile!.contentDescription"
          >
          </app-textarea>
        </div>

        <div>
          <label
            for="keyWords"
            [ngClass]="{
              'text-danger':
                (!keyWords.valid && keyWords.touched) ||
                (!keyWords.valid && form.submitted)
            }"
            >الكلمات الدالة *</label
          >
          <ng-select
            [ngClass]="{
              'ng-touched': !keyWords.valid && form.submitted
            }"
            #keyWords="ngModel"
            [addTag]="true"
            name="keyWords"
            required="true"
            [hideSelected]="true"
            [multiple]="true"
            bindLabel="name"
            [isOpen]="false"
            [selectOnTab]="true"
            [(ngModel)]="fileKeyWords"
          >
          </ng-select>
          <div
            *ngIf="
              (!keyWords.valid && keyWords.touched) ||
              (!keyWords.valid && form.submitted)
            "
          >
            <span
              class="form-text text-danger"
              *ngIf="keyWords.errors?.['required']"
              >مطلوب الادخال</span
            >
          </div>
        </div>
      </div>
    </div>

    <div class="row">
      <div class="col">
        <app-form-actions
          [form]="form"
          [actionType]="'basic'"
        ></app-form-actions>
      </div>
    </div>
  </form>
</div>
